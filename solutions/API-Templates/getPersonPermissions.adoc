:sectnums:
:sectnumlevels: 6
:toc: left
:toclevels: 2
:toc-title: Оглавление

== Метод getPersonPermissions

Для получения списка возможных операций пользователя над ресурсом необходимо вызвать сервис {serviceName-api} метод `getPersonPermissions`

=== Входные параметры

include::./API-Templates/getPersonPermissions-request.adoc[]

=== Выходные параметры

include::./API-Templates/getPersonPermissions-response.adoc[]

== Алгоритм работы

=== Валидация входящих параметров

=== Проверка прав

TODO : узнать имеет ли право пользователь сам по себе получать такие данные
TODO: Надо ли закладываться, что запрос будет про другого пользователя?

=== Формирование результата

TODO: добавить проверку сессии когда начну делать задание *

----
TODO: Перенести в logic level
Для формирования результата необходимо сделать запрос к БД (TODO: описать место хранения кредов к БД)


. вычисление групп пользователя
. составление списка ролей всех групп, исключая повторения
. формирование списка пермишенов,
. фильтрация пермишенов по ресурсу
. удаление дибликатов
. формирование результата, с группировкой по ресурсам

TODO: дописать формирование ошибок
----

=== Обработка ошибок

Формирование ошибок происходит в соответствии с <<exeptions.adoc,общим правилом>>