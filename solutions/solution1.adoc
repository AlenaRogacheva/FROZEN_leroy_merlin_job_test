:sectnums:
:sectnumlevels: 6
:toc: left
:toclevels: 2
:toc-title: Оглавление

== Задание

include::../tasks/task1.adoc[]

== Решение

=== Принятые допущения
Пользователя рассматриваем как участника какой-то группы. Только группа имеет права, пользователь сам не является владельцем прав.

Если какому-то участнику необходимо созжать эксклюзивное право, то для него нужно создать группу (группу для одного участника)
и после добавить право в эту группу.

=== TODO лист
* приложение должно работать с ресурсами или изменять права пользователям? и как это бъется с авторизацией через social login

* id пользователей не надо светить в API, нало логиноподобные строки
* логины неуникальны, имеют даты от и до
* не проверяем статусную модель, например подписанный документ нельзя удалять и дт.
* не поверены права над родительскими и дочерними ресурсами

=== ER диаграмма

image::../images/ER_diagram2.png[]

==== Описание объектов

|===
|*Объект*       |*Атрибуты*     | *Тип*         | *Связи и описание*

.3+|*Person* - Пользователь, которому выдаются права на изменение ресурсов
                |id             | int           | Идентификатор пользователя
                |name           | varchar(255)  | Имя, не используется для связей
                |group_id       | int           | Идентификатор группы, один пользователь может состоять в 0 - множестве групп

.3+| *Group* - Группа, объект объединяющий пользователей со схожими потребностями (должностными инструкциями и тд.)
                |id              | int          | Идентификатор группы
                |name            | varchar(255) | Имя, не используется для связей
                |role_id         | int          | Идентификатор роли, группа пользователей может иметь несколько ролей

.3+| *Role* - Роль, объект группировки прав
                |id              | int          | Идентификатор роли
                |name            | varchar(255) | Имя, не используется для связей
                |permission_id   | int          | Идентификатор права, используется для добавления прав группе. Роль может иметь 0 - множество прав.

.3+|*Permission* - Право, возможность выполнения действия над ресурсом, предоставляется ролям
                |id             | int           | ИД права
                |sourse_id      | int           | ИД ресурса
                |activity       | varchar(255)  | наименование активности (create, delete, edit..)

.3+|*Sourse* - Ресурс, объект, подвергающийся изменениям.
                |id             | int           | ИД ресурса
                |name           | varchar(255)  | Имя ресурса
                |activity       | varchar(255)  | Активность, используется для сохранения всех доступных действий над ресурсом
|===